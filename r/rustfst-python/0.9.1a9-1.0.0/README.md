# Comparing `tmp/rustfst_python-0.9.1a9-pp39-pypy39_pp73-manylinux_2_5_i686.manylinux1_i686.manylinux_2_17_i686.manylinux2014_i686.whl.zip` & `tmp/rustfst_python-1.0.0-cp310-cp310-musllinux_1_1_x86_64.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,45 @@
-Zip file size: 1798277 bytes, number of entries: 38
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst_python.libs/
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst_python-0.9.1a9.dist-info/
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst/
--rw-r--r--  2.0 unx     1325 b- defN 22-May-11 14:03 rustfst_python-0.9.1a9.dist-info/METADATA
--rw-rw-r--  2.0 unx     2725 b- defN 22-May-11 14:03 rustfst_python-0.9.1a9.dist-info/RECORD
--rw-r--r--  2.0 unx      237 b- defN 22-May-11 14:03 rustfst_python-0.9.1a9.dist-info/WHEEL
--rw-r--r--  2.0 unx        8 b- defN 22-May-11 14:03 rustfst_python-0.9.1a9.dist-info/top_level.txt
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst/fst/
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst/algorithms/
-drwxr-xr-x  2.0 unx        0 b- stor 22-May-11 14:03 rustfst/dylib/
--rw-r--r--  2.0 unx     1666 b- defN 22-May-11 14:03 rustfst/drawing_config.py
--rw-r--r--  2.0 unx     4331 b- defN 22-May-11 14:03 rustfst/tr.py
--rw-r--r--  2.0 unx     8339 b- defN 22-May-11 14:03 rustfst/symbol_table.py
--rw-r--r--  2.0 unx     1181 b- defN 22-May-11 14:03 rustfst/utils.py
--rw-r--r--  2.0 unx     6533 b- defN 22-May-11 14:03 rustfst/iterators.py
--rw-r--r--  2.0 unx     2268 b- defN 22-May-11 14:03 rustfst/trs.py
--rw-r--r--  2.0 unx      801 b- defN 22-May-11 14:03 rustfst/weight.py
--rw-r--r--  2.0 unx      285 b- defN 22-May-11 14:03 rustfst/__init__.py
--rw-r--r--  2.0 unx     5081 b- defN 22-May-11 14:03 rustfst/fst/const_fst.py
--rw-r--r--  2.0 unx     8193 b- defN 22-May-11 14:03 rustfst/fst/__init__.py
--rw-r--r--  2.0 unx    11283 b- defN 22-May-11 14:03 rustfst/fst/vector_fst.py
--rw-r--r--  2.0 unx      350 b- defN 22-May-11 14:03 rustfst/algorithms/tr_unique.py
--rw-r--r--  2.0 unx      510 b- defN 22-May-11 14:03 rustfst/algorithms/concat.py
--rw-r--r--  2.0 unx      579 b- defN 22-May-11 14:03 rustfst/algorithms/connect.py
--rw-r--r--  2.0 unx     2139 b- defN 22-May-11 14:03 rustfst/algorithms/compose.py
--rw-r--r--  2.0 unx      369 b- defN 22-May-11 14:03 rustfst/algorithms/optimize.py
--rw-r--r--  2.0 unx      638 b- defN 22-May-11 14:03 rustfst/algorithms/isomorphic.py
--rw-r--r--  2.0 unx      482 b- defN 22-May-11 14:03 rustfst/algorithms/tr_sort.py
--rw-r--r--  2.0 unx     1263 b- defN 22-May-11 14:03 rustfst/algorithms/project.py
--rw-r--r--  2.0 unx      489 b- defN 22-May-11 14:03 rustfst/algorithms/union.py
--rw-r--r--  2.0 unx     2850 b- defN 22-May-11 14:03 rustfst/algorithms/__init__.py
--rw-r--r--  2.0 unx     2600 b- defN 22-May-11 14:03 rustfst/algorithms/replace.py
--rw-r--r--  2.0 unx     2463 b- defN 22-May-11 14:03 rustfst/algorithms/determinize.py
--rw-r--r--  2.0 unx     1715 b- defN 22-May-11 14:03 rustfst/algorithms/shortest_path.py
--rw-r--r--  2.0 unx      497 b- defN 22-May-11 14:03 rustfst/algorithms/reverse.py
--rw-r--r--  2.0 unx      518 b- defN 22-May-11 14:03 rustfst/algorithms/rm_epsilon.py
--rwxr-xr-x  2.0 unx  2502980 b- defN 22-May-11 14:03 rustfst/dylib/dylib.cpython-39-i386-linux-gnu.so
--rwxr-xr-x  2.0 unx  2502980 b- defN 22-May-11 14:03 rustfst/dylib/dylib.pypy39-pp73-x86-linux-gnu.so
-38 files, 5077678 bytes uncompressed, 1793293 bytes compressed:  64.7%
+Zip file size: 798287 bytes, number of entries: 43
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst_python.libs/
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst_python-1.0.0.dist-info/
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst/
+-rw-r--r--  2.0 unx    81257 b- defN 24-Apr-27 14:56 rustfst_python.libs/libgcc_s-a04fdf82.so.1
+-rw-r--r--  2.0 unx    12818 b- defN 24-Apr-27 14:56 rustfst_python-1.0.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx     3133 b- defN 24-Apr-27 14:56 rustfst_python-1.0.0.dist-info/RECORD
+-rw-r--r--  2.0 unx        8 b- defN 24-Apr-27 14:56 rustfst_python-1.0.0.dist-info/top_level.txt
+-rw-r--r--  2.0 unx      113 b- defN 24-Apr-27 14:56 rustfst_python-1.0.0.dist-info/WHEEL
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst/fst/
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst/dylib/
+drwxr-xr-x  2.0 unx        0 b- stor 24-Apr-27 14:56 rustfst/algorithms/
+-rw-r--r--  2.0 unx     1666 b- defN 24-Apr-27 14:56 rustfst/drawing_config.py
+-rw-r--r--  2.0 unx     2272 b- defN 24-Apr-27 14:56 rustfst/trs.py
+-rw-r--r--  2.0 unx     9741 b- defN 24-Apr-27 14:56 rustfst/symbol_table.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-27 14:56 rustfst/py.typed
+-rw-r--r--  2.0 unx      805 b- defN 24-Apr-27 14:56 rustfst/weight.py
+-rw-r--r--  2.0 unx     1892 b- defN 24-Apr-27 14:56 rustfst/string_paths_iterator.py
+-rw-r--r--  2.0 unx     4306 b- defN 24-Apr-27 14:56 rustfst/tr.py
+-rw-r--r--  2.0 unx      285 b- defN 24-Apr-27 14:56 rustfst/__init__.py
+-rw-r--r--  2.0 unx     1175 b- defN 24-Apr-27 14:56 rustfst/ffi_utils.py
+-rw-r--r--  2.0 unx     6577 b- defN 24-Apr-27 14:56 rustfst/iterators.py
+-rw-r--r--  2.0 unx     1549 b- defN 24-Apr-27 14:56 rustfst/string_path.py
+-rw-r--r--  2.0 unx    19399 b- defN 24-Apr-27 14:56 rustfst/fst/vector_fst.py
+-rw-r--r--  2.0 unx     7756 b- defN 24-Apr-27 14:56 rustfst/fst/__init__.py
+-rw-r--r--  2.0 unx     4925 b- defN 24-Apr-27 14:56 rustfst/fst/const_fst.py
+-rwxr-xr-x  2.0 unx  1912177 b- defN 24-Apr-27 14:56 rustfst/dylib/dylib.cpython-310-x86_64-linux-gnu.so
+-rw-r--r--  2.0 unx      999 b- defN 24-Apr-27 14:56 rustfst/algorithms/concat.py
+-rw-r--r--  2.0 unx      496 b- defN 24-Apr-27 14:56 rustfst/algorithms/tr_unique.py
+-rw-r--r--  2.0 unx     2467 b- defN 24-Apr-27 14:56 rustfst/algorithms/determinize.py
+-rw-r--r--  2.0 unx      522 b- defN 24-Apr-27 14:56 rustfst/algorithms/rm_epsilon.py
+-rw-r--r--  2.0 unx      501 b- defN 24-Apr-27 14:56 rustfst/algorithms/reverse.py
+-rw-r--r--  2.0 unx     2358 b- defN 24-Apr-27 14:56 rustfst/algorithms/randgen.py
+-rw-r--r--  2.0 unx     1581 b- defN 24-Apr-27 14:56 rustfst/algorithms/union.py
+-rw-r--r--  2.0 unx      670 b- defN 24-Apr-27 14:56 rustfst/algorithms/optimize.py
+-rw-r--r--  2.0 unx      486 b- defN 24-Apr-27 14:56 rustfst/algorithms/tr_sort.py
+-rw-r--r--  2.0 unx      981 b- defN 24-Apr-27 14:56 rustfst/algorithms/top_sort.py
+-rw-r--r--  2.0 unx     3538 b- defN 24-Apr-27 14:56 rustfst/algorithms/compose.py
+-rw-r--r--  2.0 unx     1267 b- defN 24-Apr-27 14:56 rustfst/algorithms/project.py
+-rw-r--r--  2.0 unx     1719 b- defN 24-Apr-27 14:56 rustfst/algorithms/shortest_path.py
+-rw-r--r--  2.0 unx     2854 b- defN 24-Apr-27 14:56 rustfst/algorithms/__init__.py
+-rw-r--r--  2.0 unx      642 b- defN 24-Apr-27 14:56 rustfst/algorithms/isomorphic.py
+-rw-r--r--  2.0 unx     2629 b- defN 24-Apr-27 14:56 rustfst/algorithms/replace.py
+-rw-r--r--  2.0 unx      753 b- defN 24-Apr-27 14:56 rustfst/algorithms/connect.py
+43 files, 2096317 bytes uncompressed, 792683 bytes compressed:  62.2%
```

## zipnote {}

```diff
@@ -1,115 +1,130 @@
 Filename: rustfst_python.libs/
 Comment: 
 
-Filename: rustfst_python-0.9.1a9.dist-info/
+Filename: rustfst_python-1.0.0.dist-info/
 Comment: 
 
 Filename: rustfst/
 Comment: 
 
-Filename: rustfst_python-0.9.1a9.dist-info/METADATA
+Filename: rustfst_python.libs/libgcc_s-a04fdf82.so.1
 Comment: 
 
-Filename: rustfst_python-0.9.1a9.dist-info/RECORD
+Filename: rustfst_python-1.0.0.dist-info/METADATA
 Comment: 
 
-Filename: rustfst_python-0.9.1a9.dist-info/WHEEL
+Filename: rustfst_python-1.0.0.dist-info/RECORD
 Comment: 
 
-Filename: rustfst_python-0.9.1a9.dist-info/top_level.txt
+Filename: rustfst_python-1.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: rustfst/fst/
+Filename: rustfst_python-1.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: rustfst/algorithms/
+Filename: rustfst/fst/
 Comment: 
 
 Filename: rustfst/dylib/
 Comment: 
 
+Filename: rustfst/algorithms/
+Comment: 
+
 Filename: rustfst/drawing_config.py
 Comment: 
 
-Filename: rustfst/tr.py
+Filename: rustfst/trs.py
 Comment: 
 
 Filename: rustfst/symbol_table.py
 Comment: 
 
-Filename: rustfst/utils.py
+Filename: rustfst/py.typed
 Comment: 
 
-Filename: rustfst/iterators.py
+Filename: rustfst/weight.py
 Comment: 
 
-Filename: rustfst/trs.py
+Filename: rustfst/string_paths_iterator.py
 Comment: 
 
-Filename: rustfst/weight.py
+Filename: rustfst/tr.py
 Comment: 
 
 Filename: rustfst/__init__.py
 Comment: 
 
-Filename: rustfst/fst/const_fst.py
+Filename: rustfst/ffi_utils.py
 Comment: 
 
-Filename: rustfst/fst/__init__.py
+Filename: rustfst/iterators.py
+Comment: 
+
+Filename: rustfst/string_path.py
 Comment: 
 
 Filename: rustfst/fst/vector_fst.py
 Comment: 
 
-Filename: rustfst/algorithms/tr_unique.py
+Filename: rustfst/fst/__init__.py
 Comment: 
 
-Filename: rustfst/algorithms/concat.py
+Filename: rustfst/fst/const_fst.py
 Comment: 
 
-Filename: rustfst/algorithms/connect.py
+Filename: rustfst/dylib/dylib.cpython-310-x86_64-linux-gnu.so
 Comment: 
 
-Filename: rustfst/algorithms/compose.py
+Filename: rustfst/algorithms/concat.py
 Comment: 
 
-Filename: rustfst/algorithms/optimize.py
+Filename: rustfst/algorithms/tr_unique.py
 Comment: 
 
-Filename: rustfst/algorithms/isomorphic.py
+Filename: rustfst/algorithms/determinize.py
 Comment: 
 
-Filename: rustfst/algorithms/tr_sort.py
+Filename: rustfst/algorithms/rm_epsilon.py
 Comment: 
 
-Filename: rustfst/algorithms/project.py
+Filename: rustfst/algorithms/reverse.py
+Comment: 
+
+Filename: rustfst/algorithms/randgen.py
 Comment: 
 
 Filename: rustfst/algorithms/union.py
 Comment: 
 
-Filename: rustfst/algorithms/__init__.py
+Filename: rustfst/algorithms/optimize.py
 Comment: 
 
-Filename: rustfst/algorithms/replace.py
+Filename: rustfst/algorithms/tr_sort.py
 Comment: 
 
-Filename: rustfst/algorithms/determinize.py
+Filename: rustfst/algorithms/top_sort.py
+Comment: 
+
+Filename: rustfst/algorithms/compose.py
+Comment: 
+
+Filename: rustfst/algorithms/project.py
 Comment: 
 
 Filename: rustfst/algorithms/shortest_path.py
 Comment: 
 
-Filename: rustfst/algorithms/reverse.py
+Filename: rustfst/algorithms/__init__.py
 Comment: 
 
-Filename: rustfst/algorithms/rm_epsilon.py
+Filename: rustfst/algorithms/isomorphic.py
 Comment: 
 
-Filename: rustfst/dylib/dylib.cpython-39-i386-linux-gnu.so
+Filename: rustfst/algorithms/replace.py
 Comment: 
 
-Filename: rustfst/dylib/dylib.pypy39-pp73-x86-linux-gnu.so
+Filename: rustfst/algorithms/connect.py
 Comment: 
 
 Zip file comment:
```

## rustfst/tr.py

```diff
@@ -2,29 +2,29 @@
 from ctypes import (
     c_size_t,
     byref,
     c_float,
     c_void_p,
 )
 from rustfst.weight import weight_one
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from typing import Optional
 
 
 class Tr:
     """
     Structure representing a transition from a state to another state in a FST.
     Attributes:
         ilabel: The input label.
         olabel: The output label.
-        weight: The arc weight.
+        weight: The transition weight.
         nextstate: The destination state for the arc.
     """
 
     def __init__(
         self,
         ilabel: Optional[int] = None,
         olabel: Optional[int] = None,
@@ -129,13 +129,11 @@
             and self.olabel == other.olabel
             and self.weight == other.weight
             and self.next_state == other.next_state
         )
 
     def __repr__(self):
         """x.__repr__() <==> repr(x)"""
-        return "<Tr ilabel={}, olabel={}, weight={}, next_state={}>".format(
-            self.ilabel, self.olabel, self.weight, self.next_state
-        )
+        return f"<Tr ilabel={self.ilabel}, olabel={self.olabel}, weight={self.weight}, next_state={self.next_state}>"
 
     def __del__(self):
         lib.tr_delete(self._ptr)
```

## rustfst/symbol_table.py

```diff
@@ -1,12 +1,12 @@
 from __future__ import annotations
 
-from typing import Union
+from typing import Union, Tuple, List
 
-from rustfst.utils import lib, check_ffi_error
+from rustfst.ffi_utils import lib, check_ffi_error
 import ctypes
 from pathlib import Path
 
 
 class SymbolTable:
     """
     `SymbolTable` class. This class wraps the `SymbolTable` struct.
@@ -84,15 +84,15 @@
         Raises:
           KeyError: Key not found.
         """
         if isinstance(key, int):
             return self._find_index(key)
         if isinstance(key, str):
             return self._find_symbol(key)
-        raise "key can only be a string or integer. Not {}".format(type(key))
+        raise f"key can only be a string or integer. Not {type(key)}"
 
     def _find_index(self, key: int) -> str:
         key = ctypes.c_size_t(key)
         symbol = ctypes.c_void_p()
         ret_code = lib.symt_find_index(self.ptr, key, ctypes.byref(symbol))
         err_msg = "`find` failed"
         check_ffi_error(ret_code, err_msg)
@@ -128,15 +128,15 @@
             ret_code = lib.symt_member_index(self.ptr, index, ctypes.byref(is_present))
         elif isinstance(key, str):
             symbol = key.encode("utf-8")
             ret_code = lib.symt_member_symbol(
                 self.ptr, symbol, ctypes.byref(is_present)
             )
         else:
-            raise "key can only be a string or integer. Not {}".format(type(key))
+            raise f"key can only be a string or integer. Not {type(key)}"
 
         err_msg = "`member` failed"
         check_ffi_error(ret_code, err_msg)
 
         return bool(is_present.value)
 
     def num_symbols(self) -> int:
@@ -148,36 +148,36 @@
         ret_code = lib.symt_num_symbols(self.ptr, ctypes.byref(num_symbols))
         err_msg = "`num_symbols` failed"
         check_ffi_error(ret_code, err_msg)
 
         return int(num_symbols.value)
 
     @classmethod
-    def read(cls, filename: Path) -> SymbolTable:
+    def read(cls, filename: Union[str, Path]) -> SymbolTable:
         """
         Reads symbol table from binary file.
         This class method creates a new SymbolTable from a symbol table binary file.
         Args:
           filename: The string location of the input binary file.
         Returns:
           A new SymbolTable instance.
         See also: `SymbolTable.read_fst`, `SymbolTable.read_text`.
         """
         symt = ctypes.pointer(ctypes.c_void_p())
         ret_code = lib.symt_from_path(
             ctypes.byref(symt), str(filename).encode("utf-8"), ctypes.c_size_t(1)
         )
 
-        err_msg = "Read failed for bin file : {}".format(filename)
+        err_msg = f"Read failed for bin file : {filename}"
         check_ffi_error(ret_code, err_msg)
 
         return cls(ptr=symt)
 
     @classmethod
-    def read_text(cls, filename: Path) -> SymbolTable:
+    def read_text(cls, filename: Union[str, Path]) -> SymbolTable:
         """
         Reads symbol table from text file.
         This class method creates a new SymbolTable from a symbol table text file.
         Args:
           filename: The string location of the input text file.
 
         Returns:
@@ -185,49 +185,49 @@
         See also: `SymbolTable.read`, `SymbolTable.read_fst`.
         """
         symt = ctypes.pointer(ctypes.c_void_p())
         ret_code = lib.symt_from_path(
             ctypes.byref(symt), str(filename).encode("utf-8"), ctypes.c_size_t(0)
         )
 
-        err_msg = "Read failed for text file : {}".format(filename)
+        err_msg = f"Read failed for text file : {filename}"
         check_ffi_error(ret_code, err_msg)
 
         return cls(ptr=symt)
 
-    def write(self, filename: Path):
+    def write(self, filename: Union[str, Path]):
         """
         Serializes symbol table to a file.
         This methods writes the SymbolTable to a file in binary format.
         Args:
           filename: The string location of the output file.
         Raises:
           FstIOError: Write failed.
         """
         ret_code = lib.symt_write_file(
             self.ptr, str(filename).encode("utf-8"), ctypes.c_size_t(1)
         )
 
-        err_msg = "Write failed for bin file : {}".format(filename)
+        err_msg = f"Write failed for bin file : {filename}"
         check_ffi_error(ret_code, err_msg)
 
-    def write_text(self, filename: Path):
+    def write_text(self, filename: Union[str, Path]):
         """
         Writes symbol table to text file.
         This method writes the SymbolTable to a file in human-readable format.
         Args:
           filename: The string location of the output file.
         Raises:
           FstIOError: Write failed.
         """
         ret_code = lib.symt_write_file(
             self.ptr, str(filename).encode("utf-8"), ctypes.c_size_t(0)
         )
 
-        err_msg = "Write failed for text file : {}".format(filename)
+        err_msg = f"Write failed for text file : {filename}"
         check_ffi_error(ret_code, err_msg)
 
     def equals(self, other: SymbolTable) -> bool:
         """
         Check if this SymbolTable is equal to the other
 
         Params:
@@ -250,9 +250,63 @@
         Params:
             other: SymbolTable instance
         Returns:
              bool
         """
         return self.equals(other)
 
+    def __iter__(self) -> SymbolTableIterator:
+        """
+        Returns an Iterator over the SymbolTable.
+        Returns:
+            An iterator over the SymbolTable.
+        """
+        return SymbolTableIterator(self)
+
+    @classmethod
+    def from_symbols(cls, symbols: List[str]) -> SymbolTable:
+        """
+        Constructs a SymbolTable from list of strings.
+
+        Args:
+            symbols: List of symbols
+
+        Returns:
+            A new `SymbolTable`.
+        """
+        symt = cls()
+
+        for symbol in symbols:
+            symt.add_symbol(symbol)
+
+        return symt
+
     def __del__(self):
         lib.symt_destroy(self.ptr)
+
+
+class SymbolTableIterator:
+    """
+    Iterator on a SymbolTable. Allows retrieving all the symbols along with their corresponding labels.
+    """
+
+    def __init__(self, symbol_table: SymbolTable):
+        """
+        Constructs an iterator from the `Symboltable`.
+        Args:
+            symbol_table:
+        """
+        self._symt = symbol_table
+        self._idx = 0
+        self._len = self._symt.num_symbols()
+
+    def __next__(self) -> Tuple[int, str]:
+        """
+        Iterator over the symbols in the `SymbolTable`.
+        Returns:
+            A pair label (int) and symbol (str).
+        """
+        if self._idx < self._len:
+            output = (self._idx, self._symt.find(self._idx))
+            self._idx += 1
+            return output
+        raise StopIteration
```

## rustfst/iterators.py

```diff
@@ -1,21 +1,25 @@
 from __future__ import annotations
 import ctypes
 from typing import Optional
-from rustfst.utils import lib, check_ffi_error
+from rustfst.ffi_utils import lib, check_ffi_error
 from rustfst.tr import Tr
+from typing import TYPE_CHECKING
+
+if TYPE_CHECKING:
+    from rustfst import Fst
 
 
 class TrsIterator:
     """
     TrsIterator(fst, state)
       This class is used for iterating over the trs leaving some state of a FST.
     """
 
-    def __init__(self, fst: Fst, state: int) -> TrsIterator:
+    def __init__(self, fst: Fst, state: int):
         self.ptr = fst  # reference fst to prolong its lifetime (prevent early gc)
         state = ctypes.c_size_t(state)
         iter_ptr = ctypes.pointer(ctypes.c_void_p())
 
         ret_code = lib.trs_iterator_new(fst.ptr, state, ctypes.byref(iter_ptr))
         err_msg = "`__init__` failed"
         check_ffi_error(ret_code, err_msg)
@@ -63,15 +67,15 @@
 
     def __iter__(self) -> TrsIterator:
         """x.__iter__() <==> iter(x)"""
         return self
 
     def __repr__(self):
         """x.__repr__() <==> repr(x)"""
-        return "<TrsIterator at 0x{:x}>".format(id(self))
+        return f"<TrsIterator at 0x{id(self):x}>"
 
     def __del__(self):
         lib.trs_iterator_destroy(self._ptr)
 
 
 class MutableTrsIterator:
     """
@@ -104,15 +108,15 @@
         err_msg = "`done` failed"
         check_ffi_error(ret_code, err_msg)
 
         return bool(done.value)
 
     def __next__(self):
         """
-        Advances the internal tr iteractor.
+        Advances the internal tr iterator.
         :return: None
         """
         ret_code = lib.mut_trs_iterator_next(self._ptr)
         err_msg = "`next` failed"
         check_ffi_error(ret_code, err_msg)
 
     def reset(self):
@@ -152,15 +156,15 @@
 
     def __iter__(self) -> MutableTrsIterator:
         """x.__iter__() <==> iter(x)"""
         return self
 
     def __repr__(self):
         """x.__repr__() <==> repr(x)"""
-        return "<MutableTrsIterator at 0x{:x}>".format(id(self))
+        return f"<MutableTrsIterator at 0x{id(self):x}>"
 
     def __del__(self):
         lib.mut_trs_iterator_destroy(self._ptr)
 
 
 class StateIterator:
     """
@@ -209,11 +213,11 @@
 
     def __iter__(self) -> StateIterator:
         """x.__iter__() <==> iter(x)"""
         return self
 
     def __repr__(self):
         """x.__repr__() <==> repr(x)"""
-        return "<StateIterator at 0x{:x}>".format(id(self))
+        return f"<StateIterator at 0x{id(self):x}>"
 
     def __del__(self):
         lib.state_iterator_destroy(self._ptr)
```

## rustfst/trs.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 from ctypes import byref, c_void_p, c_size_t, string_at
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.tr import Tr
```

## rustfst/weight.py

```diff
@@ -1,9 +1,9 @@
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 
 def weight_one() -> float:
     """
```

## rustfst/fst/const_fst.py

```diff
@@ -1,18 +1,18 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst import Fst
 from rustfst.symbol_table import SymbolTable
 from rustfst.drawing_config import DrawingConfig
-from typing import Optional
+from typing import Optional, Union
 from pathlib import Path
 
 
 class ConstFst(Fst):
     def __init__(self, ptr=None):
         if ptr:
             self.ptr = ptr
@@ -26,18 +26,14 @@
         self,
         filename: str,
         isymbols: Optional[SymbolTable] = None,
         osymbols: Optional[SymbolTable] = None,
         drawing_config: DrawingConfig = DrawingConfig(),
     ):
         """
-        draw(self, filename, isymbols=None, osymbols=None, ssymbols=None,
-             acceptor=False, title="", width=8.5, height=11, portrait=False,
-             vertical=False, ranksep=0.4, nodesep=0.25, fontsize=14,
-             precision=5, show_weight_one=False, print_weight=True):
         Writes out the FST in Graphviz text format.
         This method writes out the FST in the dot graph description language. The
         graph can be rendered using the `dot` executable provided by Graphviz.
         Args:
           filename: The string location of the output dot/Graphviz file.
           isymbols: An optional symbol table used to label input symbols.
           osymbols: An optional symbol table used to label output symbols.
@@ -86,67 +82,74 @@
             ctypes.c_size_t(drawing_config.print_weight),
         )
 
         err_msg = "fst draw failed"
         check_ffi_error(ret_code, err_msg)
 
     @classmethod
-    def read(cls, filename: Path) -> Fst:
+    def read(cls, filename: Union[str, Path]) -> ConstFst:
         """
-        Fst.read(filename)
-            Read a Fst at a given path.
-            Args:
-              filename: The string location of the input file.
-            Returns:
-              An FST.
-            Raises:
-              errors.SnipsFstException: Read failed.
+        Read a Fst at a given path.
+        Args:
+          filename: The string location of the input file.
+        Returns:
+          An FST.
+        Raises:
+          ValueError: Read failed.
         """
         fst = ctypes.pointer(ctypes.c_void_p())
         ret_code = lib.const_fst_from_path(
             ctypes.byref(fst), str(filename).encode("utf-8")
         )
-        err_msg = "Read failed. file: {}".format(filename)
+        err_msg = f"Read failed. file: {filename}"
         check_ffi_error(ret_code, err_msg)
 
         return cls(ptr=fst)
 
-    def write(self, filename: Path):
+    def write(self, filename: Union[str, Path]):
         """
-        write(self, filename)
-            Serializes FST to a file.
-            This method writes the FST to a file in consttor binary format.
-            Args:
-              filename: The string location of the output file.
-            Raises:
-              errors.SnipsFstException: Write failed.
+        Serializes FST to a file.
+        This method writes the FST to a file in binary format.
+        Args:
+          filename: The string location of the output file.
+        Raises:
+          ValueError: Write failed.
         """
         ret_code = lib.const_fst_write_file(self.ptr, str(filename).encode("utf-8"))
-        err_msg = "Write failed. file: {}".format(filename)
+        err_msg = f"Write failed. file: {filename}"
         check_ffi_error(ret_code, err_msg)
 
     def equals(self, other: Fst) -> bool:
         """
-        equals(self, other)
-            Check if this Fst is equal to the other
-        :param other: Fst instance
-        :return: bool
+        Check if this Fst is equal to the other
+        Args :
+            other: Fst instance
+        Returns:
+             bool
         """
         is_equal = ctypes.c_size_t()
 
         ret_code = lib.const_fst_equals(self.ptr, other.ptr, ctypes.byref(is_equal))
         err_msg = "Error checking equality"
         check_ffi_error(ret_code, err_msg)
 
         return bool(is_equal.value)
 
     def copy(self) -> ConstFst:
         """
-        copy fst(self, other)
-        :return: Fst
+        Returns :
+            Deepcopy of the Fst.
         """
         cloned_fst = ctypes.c_size_t()
         ret_code = lib.const_fst_copy(self.ptr, ctypes.byref(cloned_fst))
         err_msg = "Error copying fst"
         check_ffi_error(ret_code, err_msg)
 
         return ConstFst(cloned_fst)
+
+    def __str__(self):
+        s = ctypes.c_void_p()
+        ret_code = lib.const_fst_display(self.ptr, ctypes.byref(s))
+        err_msg = "Error displaying ConstFst"
+        check_ffi_error(ret_code, err_msg)
+
+        return ctypes.string_at(s).decode("utf8")
```

## rustfst/fst/__init__.py

```diff
@@ -1,57 +1,53 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.symbol_table import SymbolTable
 from rustfst.iterators import TrsIterator
 from typing import Optional
 
 
 class Fst:
     """
-    Fst(ptr=None)
-      This class wraps a mutable FST and exposes all methods.
-      Args:
-        ptr: An optional pointer pointing to an existing Fst rust struct.
+    This class is the base class for every Fst objects.
     """
 
-    def __init__(self, ptr):
+    def __init__(self, ptr, isymt=None, osymt=None):
         self.ptr = ptr
-        # add shims for symbol tables (prevent early gc of the tables)
-        self._input_symbols = None
-        self._output_symbols = None
+        self._input_symbols = isymt
+        self._output_symbols = osymt
 
     def start(self) -> Optional[int]:
         """
-        start(self)
-            Returns the start state.
+        Returns the start state.
+        Returns :
+            The start state or None.
         """
         start = ctypes.c_size_t()
         ret_code = lib.fst_start(self.ptr, ctypes.byref(start))
         err_msg = "Error getting start state"
         check_ffi_error(ret_code, err_msg)
 
         if start is None:
             return None
         return int(start.value)
 
     def final(self, state: int) -> Optional[float]:
         """
-        final(self, state)
-            Returns the final weight of a state.
-            Args:
-              state: The integer index of a state.
-            Returns:
-              The final Weight of that state.
-            Raises:
-              Exception: If State index out of range.
+        Returns the final weight of a state.
+        Args:
+          state: The integer index of a state.
+        Returns:
+          The final Weight of that state.
+        Raises:
+          Exception: If State index out of range.
         """
         state = ctypes.c_size_t(state)
         weight = ctypes.c_float()
 
         ret_code = lib.fst_final_weight(self.ptr, state, ctypes.byref(weight))
         err_msg = "Error getting final weight"
         check_ffi_error(ret_code, err_msg)
@@ -59,124 +55,124 @@
         if weight is None:
             return None
 
         return weight.value
 
     def num_trs(self, state: int) -> int:
         """
-        num_trs(self, state)
-            Returns the number of trs leaving a state.
-            Args:
-              state: The integer index of a state.
-            Returns:
-              The number of trs leaving that state.
-            Raises:
-              Exception: If State index out of range.
-            See also: `num_states`.
+        Returns the number of trs leaving a state.
+        Args:
+          state: The integer index of a state.
+        Returns:
+          The number of trs leaving that state.
+        Raises:
+          Exception: If State index out of range.
+        See also: `num_states`.
         """
         num_trs = ctypes.c_size_t()
         state = ctypes.c_size_t(state)
         ret_code = lib.fst_num_trs(self.ptr, state, ctypes.byref(num_trs))
         err_msg = "Error getting number of trs"
         check_ffi_error(ret_code, err_msg)
 
         return int(num_trs.value)
 
     def trs(self, state: int) -> TrsIterator:
         """
-        trs(self, state)
-            Returns an iterator over trs leaving the specified state.
-            Args:
-              state: The source state ID.
-            Returns:
-              An TrsIterator.
-            See also: `mutable_trs`, `states`.
+        Returns an iterator over trs leaving the specified state.
+        Args:
+          state: The source state ID.
+        Returns:
+          An TrsIterator.
+        See also: `mutable_trs`, `states`.
         """
         return TrsIterator(self, state)
 
     def is_final(self, state_id: int) -> bool:
         """
-        is_final(state)
         Check if a state is final
-        :param state_id:
-        :return: bool
+        Args :
+            state_id:
+        Returns :
+            bool
         """
         state = ctypes.c_size_t(state_id)
         is_final = ctypes.c_size_t()
 
         ret_code = lib.fst_is_final(self.ptr, state, ctypes.byref(is_final))
         err_msg = "Error checking if state is final"
         check_ffi_error(ret_code, err_msg)
 
         return bool(is_final.value)
 
     def is_start(self, state_id: int) -> bool:
         """
-        is_start(state)
-        Check if a state is a start
-        :param state_id:
-        :return: bool
+        Check if a state is a start state.
+        Args :
+            state_id: Integer index of the state.
+        Returns :
+            bool
         """
         state = ctypes.c_size_t(state_id)
         is_start = ctypes.c_size_t()
 
         ret_code = lib.fst_is_start(self.ptr, state, ctypes.byref(is_start))
         err_msg = "Error checking if state is final"
         check_ffi_error(ret_code, err_msg)
 
         return bool(is_start.value)
 
     def input_symbols(self) -> Optional[SymbolTable]:
         """
-        input_symbols(self)
-            Returns the FST's input symbol table, or None if none is present.
-            See also: `input_symbols`.
+        Returns the Fst's input symbol table, or None if none is present.
+        Returns :
+            The Fst's input symbol table, or None if none is present.
+        See also: `output_symbols`.
         """
         if self._input_symbols:
             return self._input_symbols
 
         table = ctypes.pointer(ctypes.c_void_p())
-
         ret_code = lib.fst_input_symbols(self.ptr, ctypes.byref(table))
         err_msg = "Error getting input symbols"
         check_ffi_error(ret_code, err_msg)
 
         if table.contents:
             return SymbolTable(ptr=table)
         return None
 
     def output_symbols(self) -> Optional[SymbolTable]:
         """
-        output_symbols(self)
-            Returns the FST's output symbol table, or None if none is present.
-            See also: `input_symbols`.
+        Returns the Fst's output symbol table, or None if none is present.
+        Returns :
+            The Fst's output symbol table, or None if none is present.
+        See also: `input_symbols`.
         """
         if self._output_symbols:
             return self._output_symbols
 
         table = ctypes.pointer(ctypes.c_void_p())
 
         ret_code = lib.fst_output_symbols(self.ptr, ctypes.byref(table))
         err_msg = "Error getting output symbols"
         check_ffi_error(ret_code, err_msg)
 
         if table.contents:
             return SymbolTable(ptr=table)
         return None
 
-    def set_input_symbols(self, syms: SymbolTable) -> Fst:
+    def set_input_symbols(self, syms: Optional[SymbolTable]) -> Fst:
         """
-        set_input_symbols(self, syms)
-            Sets the input symbol table.
-            Passing None as a value will delete the input symbol table.
-            Args:
-              syms: A SymbolTable.
-            Returns:
-              self.
-            See also: `set_output_symbols`.
+        Sets the input symbol table.
+        Passing None as a value will delete the input symbol table.
+        Args:
+          syms: A SymbolTable.
+        Returns:
+          self.
+        See also: `set_output_symbols`.
         """
         if syms is None:
             ret_code = lib.fst_unset_input_symbols(self.ptr)
             err_msg = "Error unsetting input symbols"
             check_ffi_error(ret_code, err_msg)
             # detach symbol table from fst
             self._input_symbols = None
@@ -188,24 +184,23 @@
         check_ffi_error(ret_code, err_msg)
 
         # attach symbol table to fst (prevent early gc of syms)
         self._input_symbols = syms
 
         return self
 
-    def set_output_symbols(self, syms: SymbolTable) -> Fst:
+    def set_output_symbols(self, syms: Optional[SymbolTable]) -> Fst:
         """
-        set_output_symbols(self, syms)
-            Sets the output symbol table.
-            Passing None as a value will delete the output symbol table.
-            Args:
-              syms: A SymbolTable.
-            Returns:
-              self.
-            See also: `set_input_symbols`.
+        Sets the output symbol table.
+        Passing None as a value will delete the output symbol table.
+        Args:
+          syms: A SymbolTable.
+        Returns:
+          self.
+        See also: `set_input_symbols`.
         """
         if syms is None:
             ret_code = lib.fst_unset_output_symbols(self.ptr)
             err_msg = "Error unsetting output symbols"
             check_ffi_error(ret_code, err_msg)
             # detach symbol table from fst
             self._output_symbols = None
@@ -220,49 +215,44 @@
         # attach symbol table to fst (prevent early gc of syms)
         self._output_symbols = syms
 
         return self
 
     def remove_input_symbols(self, symbols: list[int]) -> Fst:
         """
-        remove_input_symbols(self, symbols)
-            Args:
-              symbols: List[int]
-            Returns:
-              self.
+        Args:
+          symbols: List[int]
+        Returns:
+          self.
         """
         symbols_ptr = (ctypes.c_int * len(symbols))(*symbols)
         symbols_len = ctypes.c_size_t(len(symbols))
         ret_code = lib.fst_remove_input_symbols(self.ptr, symbols_ptr, symbols_len)
         err_msg = "Error during remove_input_symbols"
         check_ffi_error(ret_code, err_msg)
 
         return self
 
     def remove_output_symbols(self, symbols: list[int]) -> Fst:
         """
-        remove_output_symbols(self, symbols)
-            Args:
-              symbols: List[int]
-            Returns:
-              self.
+        Args:
+          symbols: List[int]
+        Returns:
+          self.
         """
         symbols_ptr = (ctypes.c_int * len(symbols))(*symbols)
         symbols_len = ctypes.c_size_t(len(symbols))
         ret_code = lib.fst_remove_output_symbols(self.ptr, symbols_ptr, symbols_len)
         err_msg = "Error during remove_outout_symbols"
         check_ffi_error(ret_code, err_msg)
 
         return self
 
     def __eq__(self, y: Fst):
         """x.__eq__(y) <==> x==y"""
         return self.equals(y)
 
-    def __str__(self):
-        return self.text()
-
     def __repr__(self):
-        return "<rustfst.fst.Fst at {}>".format(id(self))
+        return f"<rustfst.fst.Fst at {id(self)}>"
 
     def __del__(self):
         lib.fst_destroy(self.ptr)
```

## rustfst/fst/vector_fst.py

```diff
@@ -1,41 +1,64 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+
+from rustfst.string_paths_iterator import StringPathsIterator
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst import Fst
 from rustfst.symbol_table import SymbolTable
 from rustfst.drawing_config import DrawingConfig
 from rustfst.iterators import MutableTrsIterator, StateIterator
 from rustfst.tr import Tr
 from rustfst.weight import weight_one
-from typing import Optional
+from typing import Optional, Union
 from pathlib import Path
 
 from typing import List
 
 
 class VectorFst(Fst):
     def __init__(self, ptr=None):
         """
         Creates an empty VectorFst.
         """
+        self._input_symbols = None
+        self._output_symbols = None
+
         if ptr:
             self.ptr = ptr
+
+            # Check if isymt inside
+            isymt = ctypes.pointer(ctypes.c_void_p())
+            ret_code = lib.fst_input_symbols(self.ptr, ctypes.byref(isymt))
+            err_msg = "Error getting input symbols"
+            check_ffi_error(ret_code, err_msg)
+            if isymt.contents:
+                self._input_symbols = SymbolTable(ptr=isymt)
+
+            # Check if osymt inside
+            osymt = ctypes.pointer(ctypes.c_void_p())
+            ret_code = lib.fst_output_symbols(self.ptr, ctypes.byref(osymt))
+            err_msg = "Error getting input symbols"
+            check_ffi_error(ret_code, err_msg)
+            if osymt.contents:
+                self._output_symbols = SymbolTable(ptr=osymt)
+
         else:
             fst_ptr = ctypes.pointer(ctypes.c_void_p())
             ret_code = lib.vec_fst_new(ctypes.byref(fst_ptr))
 
             err_msg = "Something went wrong when creating the Fst struct"
             check_ffi_error(ret_code, err_msg)
             self.ptr = fst_ptr
-        super().__init__(self.ptr)
+
+        super().__init__(self.ptr, self._input_symbols, self._output_symbols)
 
     def add_tr(self, state: int, tr: Tr) -> Fst:
         """
         Adds a new tr to the FST and return self. Note the tr should be considered
         consumed and is not safe to use it after.
         Args:
           state: The integer index of the source state.
@@ -84,14 +107,27 @@
         state = ctypes.c_size_t(state)
         weight = ctypes.c_float(weight)
 
         ret_code = lib.vec_fst_set_final(self.ptr, state, weight)
         err_msg = "Error setting final state"
         check_ffi_error(ret_code, err_msg)
 
+    def unset_final(self, state: int):
+        """
+        Unset the final weight of a state. As a result, the state is no longer final.
+        Args:
+            state: The integer index of a state
+        Raises:
+          ValueError: State index out of range.
+        """
+        state = ctypes.c_size_t(state)
+        ret_code = lib.vec_fst_del_final_weight(self.ptr, state)
+        err_msg = "Error unsetting final state"
+        check_ffi_error(ret_code, err_msg)
+
     def mutable_trs(self, state: int) -> MutableTrsIterator:
         """
         Returns a mutable iterator over trs leaving the specified state.
         Args:
           state: The source state ID.
         Returns:
           A MutableTrsIterator.
@@ -139,14 +175,72 @@
         Returns an iterator over all states in the FST.
         Returns:
           A StateIterator object for the FST.
         See also: `trs`, `mutable_trs`.
         """
         return StateIterator(self)
 
+    def relabel_tables(
+        self,
+        *,
+        old_isymbols: Optional[SymbolTable] = None,
+        new_isymbols: SymbolTable,
+        attach_new_isymbols: bool = True,
+        old_osymbols: Optional[SymbolTable] = None,
+        new_osymbols: SymbolTable,
+        attach_new_osymbols: bool = True,
+    ) -> VectorFst:
+        """
+        Destructively relabel the Fst with new Symbol Tables.
+
+        Relabelling refers to the operation where all the labels of an Fst are mapped to the equivalent labels
+        of a new `SymbolTable`.
+        If the Fst has a label `1` corresponding to the symbol "alpha" in the current symbol table and "alpha"
+        is mapped to 4 in a new SymbolTable, then all the 1 are going to be mapped to 4.
+
+        Args:
+            old_isymbols: Input `SymbolTable` used to build the Fst. If `None`, uses the Input `SymbolTable` attached to the Fst.
+            new_isymbols: New Input `SymbolTable` to use.
+            attach_new_isymbols: Whether to attach the new Input `SymbolTable` to the Fst. If False, the resulting Fst won't contain any attached Input `SymbolTable`.
+            old_osymbols: Output `SymbolTable` used to build the Fst. If `None`, uses the Output `SymbolTable` attached to the Fst
+            new_osymbols: New Output `SymbolTable` to use.
+            attach_new_osymbols: Whether to attach the new Output `SymbolTable` to the Fst. If False, the resulting Fst won't contain any attached Output `SymbolTable`.
+
+        Returns:
+            self
+
+        """
+        old_isymbols_ptr = old_isymbols.ptr if old_isymbols is not None else None
+        old_osymbols_ptr = old_osymbols.ptr if old_osymbols is not None else None
+
+        ret_code = lib.vec_fst_relabel_tables(
+            self.ptr,
+            old_isymbols_ptr,
+            new_isymbols.ptr,
+            ctypes.c_size_t(attach_new_isymbols),
+            old_osymbols_ptr,
+            new_osymbols.ptr,
+            ctypes.c_size_t(attach_new_osymbols),
+        )
+        err_msg = "Relabel tables failed"
+        check_ffi_error(ret_code, err_msg)
+
+        # Necessary because the symts are cached on the python side.
+        if attach_new_isymbols:
+            self._input_symbols = new_isymbols
+        else:
+            self._input_symbols = None
+
+        if attach_new_osymbols:
+            self._output_symbols = new_osymbols
+        else:
+            self._output_symbols = None
+
+        return self
+
     def draw(
         self,
         filename: str,
         isymbols: Optional[SymbolTable] = None,
         osymbols: Optional[SymbolTable] = None,
         drawing_config: DrawingConfig = DrawingConfig(),
     ):
@@ -203,46 +297,93 @@
             ctypes.c_size_t(drawing_config.print_weight),
         )
 
         err_msg = "fst draw failed"
         check_ffi_error(ret_code, err_msg)
 
     @classmethod
-    def read(cls, filename: Path) -> Fst:
+    def read(cls, filename: Union[str, Path]) -> VectorFst:
         """
         Read a Fst at a given path.
         Args:
           filename: The string location of the input file.
         Returns:
           An Fst.
         Raises:
           ValueError: Read failed.
         """
         fst = ctypes.pointer(ctypes.c_void_p())
         ret_code = lib.vec_fst_from_path(
             ctypes.byref(fst), str(filename).encode("utf-8")
         )
-        err_msg = "Read failed. file: {}".format(filename)
+        err_msg = f"Read failed. file: {filename}"
         check_ffi_error(ret_code, err_msg)
 
         return cls(ptr=fst)
 
-    def write(self, filename: Path):
+    def write(self, filename: Union[str, Path]):
         """
         Serializes FST to a file.
         This method writes the FST to a file in vector binary format.
         Args:
           filename: The string location of the output file.
         Raises:
           ValueError: Write failed.
         """
         ret_code = lib.vec_fst_write_file(self.ptr, str(filename).encode("utf-8"))
-        err_msg = "Write failed. file: {}".format(filename)
+        err_msg = f"Write failed. file: {filename}"
         check_ffi_error(ret_code, err_msg)
 
+    @classmethod
+    def from_bytes(cls, data: bytes) -> VectorFst:
+        """
+        Load a `VectorFst` from a sequence of bytes.
+        Args:
+            data: Sequence of bytes.
+
+        Returns:
+            Loaded `VectorFst`.
+        """
+        fst_ptr = ctypes.pointer(ctypes.c_void_p())
+
+        # Define a temporary struct to hold the bytes array
+        class BytesArray(ctypes.Structure):
+            _fields_ = [("data_ptr", ctypes.c_char_p), ("size", ctypes.c_size_t)]
+
+        c_bytes = BytesArray(data, len(data))
+
+        ret_code = lib.vec_fst_from_bytes(ctypes.byref(c_bytes), ctypes.byref(fst_ptr))
+        error_msg = "`from_bytes` failed"
+        check_ffi_error(ret_code, error_msg)
+
+        return VectorFst(ptr=fst_ptr)
+
+    def to_bytes(self) -> bytes:
+        """
+        Turns the `VectorFst` into bytes.
+        Returns:
+            Sequence of bytes.
+        """
+        # Define a temporary struct to hold the bytes array
+        class BytesArray(ctypes.Structure):
+            _fields_ = [("data_ptr", ctypes.c_void_p), ("size", ctypes.c_size_t)]
+
+        bytes_ptr = ctypes.pointer(BytesArray())
+
+        ret_code = lib.vec_fst_to_bytes(self.ptr, ctypes.byref(bytes_ptr))
+        error_msg = "`to_bytes` failed"
+        check_ffi_error(ret_code, error_msg)
+
+        return bytes(
+            [
+                ctypes.c_ubyte.from_address(bytes_ptr.contents.data_ptr + i).value
+                for i in range(bytes_ptr.contents.size)
+            ]
+        )
+
     def equals(self, other: Fst) -> bool:
         """
         Check if this Fst is equal to the other.
         Args:
             other: Fst instance
         Returns:
              Whether both Fst are equals.
@@ -271,23 +412,70 @@
         from rustfst.algorithms.compose import compose, compose_with_config
 
         if config:
             return compose_with_config(self, other, config)
         return compose(self, other)
 
     def concat(self, other: VectorFst) -> VectorFst:
+        """
+        Compute Fst Concatenation of this Fst with another Fst. Returning the resulting Fst.
+        Args:
+            other: Fst to concatenate with.
+
+        Returns:
+            The concatenated Fst.
+
+        """
         from rustfst.algorithms.concat import concat
 
         return concat(self, other)
 
     def connect(self) -> VectorFst:
+        """
+        This operation trims an Fst, removing states and trs that are not on successful paths.
+
+        Examples :
+
+        - Input
+
+        ![connect_in](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/connect_in.svg?sanitize=true)
+
+        - Output
+
+        ![connect_out](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/connect_out.svg?sanitize=true)
+
+        Returns:
+            self
+        """
         from rustfst.algorithms.connect import connect
 
         return connect(self)
 
+    def top_sort(self) -> VectorFst:
+        """
+        This operation topologically sorts its input. When sorted, all transitions are from
+        lower to higher state IDs.
+
+        Examples :
+
+        - Input
+
+        ![topsort_in](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/topsort_in.svg?sanitize=true)
+
+        - Output
+
+        ![topsort_out](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/topsort_out.svg?sanitize=true)
+
+        Returns:
+            Equivalent top sorted Fst. Modification also happens in-place.
+        """
+        from rustfst.algorithms.top_sort import top_sort
+
+        return top_sort(self)
+
     def determinize(self, config=None) -> VectorFst:
         from rustfst.algorithms.determinize import determinize, determinize_with_config
 
         if config:
             return determinize_with_config(self, config)
         return determinize(self)
 
@@ -331,18 +519,25 @@
         return shortestpath(self)
 
     def union(self, other_fst: VectorFst) -> VectorFst:
         from rustfst.algorithms.union import union
 
         return union(self, other_fst)
 
-    def optimize(self):
+    def optimize(self) -> VectorFst:
         from rustfst.algorithms.optimize import optimize
 
         optimize(self)
+        return self
+
+    def optimize_in_log(self) -> VectorFst:
+        from rustfst.algorithms.optimize import optimize_in_log
+
+        optimize_in_log(self)
+        return self
 
     def tr_sort(self, ilabel_cmp: bool = True):
         from rustfst.algorithms.tr_sort import tr_sort
 
         tr_sort(self, ilabel_cmp)
 
     def tr_unique(self):
@@ -351,12 +546,55 @@
         tr_unique(self)
 
     def isomorphic(self, other: VectorFst) -> bool:
         from rustfst.algorithms.isomorphic import isomorphic
 
         return isomorphic(self, other)
 
-    def __add__(self, y) -> VectorFst:
-        """x.__add__(y) <==> x+y"""
+    def __add__(self, other: VectorFst) -> VectorFst:
+        """
+        `fst_1 + fst_2` is a shortcut to perform the concatenation of `fst_1` and `fst_2`.
+        Args:
+            other: VectorFst to concatenate after the current Fst.
+
+        Returns:
+            The concatenated Fst.
+        """
+        x = self.copy()
+
+        return x.concat(other)
+
+    def __mul__(self, other: VectorFst) -> VectorFst:
+        """
+        `fst_1 * fst_2` is a shortcut to perform the composition of `fst_1` and `fst_2`.
+        Args:
+            other: VectorFst to compose with.
+
+        Returns:
+            The composed Fst.
+
+        """
+        return self.compose(other)
+
+    def __or__(self, other: VectorFst) -> VectorFst:
+        """
+        `fst_1 | fst_2` is a shortcut to perform the union of `fst_1` and `fst_2`.
+        Args:
+            other: VectorFst to perform the union with.
+
+        Returns:
+            The resulting Fst.
+        """
         x = self.copy()
 
-        return x.concat(y)
+        return x.union(other)
+
+    def __str__(self):
+        s = ctypes.c_void_p()
+        ret_code = lib.vec_fst_display(self.ptr, ctypes.byref(s))
+        err_msg = "Error displaying VectorFst"
+        check_ffi_error(ret_code, err_msg)
+
+        return ctypes.string_at(s).decode("utf8")
+
+    def string_paths(self) -> StringPathsIterator:
+        return StringPathsIterator(self)
```

## rustfst/algorithms/tr_unique.py

```diff
@@ -1,18 +1,20 @@
 from __future__ import annotations
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 def tr_unique(fst: VectorFst):
     """
-    tr_unique(fst)
-    :param fst: Fst
+    Keep a single instance of trs leaving the same state, going to the same state and
+    with the same input labels, output labels and weight.
+    Args:
+        fst: Fst to modify
     """
 
     ret_code = lib.fst_tr_unique(fst.ptr)
     err_msg = "Error during tr_unique"
     check_ffi_error(ret_code, err_msg)
```

## rustfst/algorithms/concat.py

```diff
@@ -1,24 +1,45 @@
 from __future__ import annotations
-from rustfst.utils import (
+
+from typing import List
+
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 def concat(fst: VectorFst, other_fst: VectorFst) -> VectorFst:
     """
-    Compute the concatenation of two FSTs.
+    Compute the concatenation of two Fsts.
     Args:
         fst: Left fst.
         other_fst: Right fst.
     Returns:
         Resulting fst.
     """
 
     ret_code = lib.fst_concat(fst.ptr, other_fst.ptr)
     err_msg = "Error during concat"
     check_ffi_error(ret_code, err_msg)
 
     return fst
+
+
+def concat_list(fsts: List[VectorFst]) -> VectorFst:
+    """
+    Compute the concatenation of a list of Fsts.
+    Args:
+        fsts: List of Fsts to concatenated
+
+    Returns:
+        The resulting concatenated Fst.
+    """
+    if not fsts:
+        raise ValueError("fsts must be at least of len 1")
+    fsts = [f.copy() for f in fsts]
+    concatenated = fsts[0]
+    for f in fsts[1:]:
+        concatenated = concatenated.concat(f)
+    return concatenated
```

## rustfst/algorithms/connect.py

```diff
@@ -1,25 +1,33 @@
 from __future__ import annotations
-import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 def connect(fst: VectorFst) -> VectorFst:
     """
-    Remove useless states in an Fst.
-    Args:
-        fst: Fst to trim.
-    Returns:
-        Fst where the useless states have been removed.
+    This operation trims an Fst, removing states and trs that are not on successful paths.
+
+    Examples :
+
+    - Input :
+
+    ![connect_in](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/connect_in.svg?sanitize=true)
+
+    - Output :
+
+    ![connect_out](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/connect_out.svg?sanitize=true)
+
+    Returns :
+        self
+
     """
 
-    connectd_fst = ctypes.c_void_p()
-    ret_code = lib.fst_connect(fst.ptr, ctypes.byref(connectd_fst))
+    ret_code = lib.fst_connect(fst.ptr)
     err_msg = "Error during connect"
     check_ffi_error(ret_code, err_msg)
 
-    return VectorFst(ptr=connectd_fst)
+    return fst
```

## rustfst/algorithms/compose.py

```diff
@@ -1,46 +1,103 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from typing import Optional, List
+
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 from enum import Enum
 
 
+class MatcherRewriteMode(Enum):
+    AUTO = 0
+    ALWAYS = 1
+    NEVER = 2
+
+
+class CIntArray(ctypes.Structure):
+    _fields_ = [("data", ctypes.POINTER(ctypes.c_uint32)), ("size", ctypes.c_uint32)]
+
+
+class MatcherConfig:
+    def __init__(
+        self,
+        sigma_label: int,
+        rewrite_mode: MatcherRewriteMode = MatcherRewriteMode.AUTO,
+        sigma_allowed_matches: Optional[List[int]] = None,
+    ):
+        array = []
+        if sigma_allowed_matches is not None:
+            array = sigma_allowed_matches
+
+        arr = CIntArray()
+        arr.size = ctypes.c_uint32(len(array))
+        arr.data = (ctypes.c_uint32 * len(array))(*array)
+
+        config = ctypes.pointer(ctypes.c_void_p())
+        ret_code = lib.fst_matcher_config_new(
+            ctypes.c_size_t(sigma_label),
+            ctypes.c_size_t(rewrite_mode.value),
+            arr,
+            ctypes.byref(config),
+        )
+        err_msg = "Error creating MatcherConfig"
+        check_ffi_error(ret_code, err_msg)
+        self.ptr = config
+
+    def __del__(self):
+        lib.fst_matcher_config_destroy(self.ptr)
+
+
 class ComposeFilter(Enum):
     AUTOFILTER = 0
     NULLFILTER = 1
     TRIVIALFILTER = 2
     SEQUENCEFILTER = 3
     ALTSEQUENCEFILTER = 4
     MATCHFILTER = 5
     NOMATCHFILTER = 6
 
 
 class ComposeConfig:
-    def __init__(self, compose_filter=None, connect: bool = None):
-        if compose_filter and connect is None:
-            self.ptr = compose_filter
-        elif compose_filter and connect:
-            config = ctypes.pointer(ctypes.c_void_p())
-            ret_code = lib.fst_compose_config_new(
-                ctypes.c_size_t(compose_filter.value),
-                ctypes.c_bool(connect),
-                ctypes.byref(config),
-            )
-            err_msg = "Error creating ComposeConfig"
-            check_ffi_error(ret_code, err_msg)
-            self.ptr = config
-        else:
-            raise ValueError("Could not create ComposeConfig")
+    def __init__(
+        self,
+        compose_filter: ComposeFilter = ComposeFilter.AUTOFILTER,
+        connect: bool = True,
+        matcher1_config: Optional[MatcherConfig] = None,
+        matcher2_config: Optional[MatcherConfig] = None,
+    ):
+        config = ctypes.pointer(ctypes.c_void_p())
+
+        m1_ptr = None
+        if matcher1_config is not None:
+            m1_ptr = matcher1_config.ptr
+        m2_ptr = None
+
+        if matcher2_config is not None:
+            m2_ptr = matcher2_config.ptr
+
+        ret_code = lib.fst_compose_config_new(
+            ctypes.c_size_t(compose_filter.value),
+            ctypes.c_bool(connect),
+            m1_ptr,
+            m2_ptr,
+            ctypes.byref(config),
+        )
+        err_msg = "Error creating ComposeConfig"
+        check_ffi_error(ret_code, err_msg)
+        self.ptr = config
+
+    def __del__(self):
+        lib.fst_compose_config_destroy(self.ptr)
 
 
 def compose(fst: VectorFst, other_fst: VectorFst) -> VectorFst:
     """
     Compute the composition of two FSTs.
     Args:
         fst: Left fst.
```

## rustfst/algorithms/optimize.py

```diff
@@ -1,19 +1,32 @@
 from __future__ import annotations
-from rustfst.utils import (
+
+import ctypes
+
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 def optimize(fst: VectorFst):
     """
     Optimize an fst.
     Args:
         fst: Fst to optimize.
     """
-
     ret_code = lib.fst_optimize(fst.ptr)
     err_msg = "Error during optimize"
     check_ffi_error(ret_code, err_msg)
+
+
+def optimize_in_log(fst: VectorFst):
+    """
+    Optimize an fst in the log semiring.
+    Args:
+        fst: Fst to optimize.
+    """
+    ret_code = lib.fst_optimize_in_log(ctypes.byref(fst.ptr))
+    err_msg = "Error during optimize_in_log"
+    check_ffi_error(ret_code, err_msg)
```

## rustfst/algorithms/isomorphic.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
```

## rustfst/algorithms/tr_sort.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
```

## rustfst/algorithms/project.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 from enum import Enum
```

## rustfst/algorithms/union.py

```diff
@@ -1,23 +1,64 @@
 from __future__ import annotations
-from rustfst.utils import (
+
+from typing import List
+
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
 def union(fst: VectorFst, other_fst: VectorFst) -> VectorFst:
     """
-    union(fst, other_fst)
-    compute the union of two FSTs.
-    :param fst: Fst
-    :param other_fst: Fst
-    :return: Fst
+    Performs the union of two wFSTs. If A transduces string `x` to `y` with weight `a`
+    and `B` transduces string `w` to `v` with weight `b`, then their union transduces `x` to `y`
+    with weight `a` and `w` to `v` with weight `b`.
+
+    Examples:
+    - Input Fst 1:
+
+    ![union_in_1](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/union_in_1.svg?sanitize=true)
+
+    - Input Fst 2:
+
+    ![union_in_2](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/union_in_2.svg?sanitize=true)
+
+    - Union:
+
+    ![union_out](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/union_out.svg?sanitize=true)
+
+    Args:
+        fst:
+        other_fst:
+    Returns:
+         The resulting Fst.
+
     """
 
     ret_code = lib.fst_union(fst.ptr, other_fst.ptr)
     err_msg = "Error during union"
     check_ffi_error(ret_code, err_msg)
 
     return fst
+
+
+def union_list(fsts: List[VectorFst]) -> VectorFst:
+    """
+    Computes the union of a list of Fsts.
+
+    Args:
+        fsts: The list of Fsts to produce the union.
+
+    Returns:
+        The resulting Fst.
+
+    """
+    if not fsts:
+        raise ValueError("fsts must be at least of len 1")
+    fsts = [f.copy() for f in fsts]
+    res_fst = fsts[0]
+    for f in fsts[1:]:
+        res_fst = union(res_fst, f)
+    return res_fst
```

## rustfst/algorithms/__init__.py

```diff
@@ -3,15 +3,15 @@
 from typing import Optional
 
 from rustfst.weight import weight_one
 from rustfst.fst.vector_fst import VectorFst
 from rustfst.symbol_table import SymbolTable
 
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 
 def acceptor(
     astring: str, symbol_table: SymbolTable, weight: Optional[float] = None
```

## rustfst/algorithms/replace.py

```diff
@@ -1,11 +1,11 @@
 from __future__ import annotations
 from typing import List
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 
@@ -29,31 +29,33 @@
     non-terminal FST. Currently Replace uses the output symbols of the trs to
     determine whether the transition is a non-terminal transition or not. A non-terminal can be
     any label that is not a non-zero terminal label in the output alphabet.
 
     Note that input argument is a vector of pairs. These correspond to the tuple
     of non-terminal Label and corresponding FST.
 
-    Root Fst :
+    Examples:
+
+    - Root Fst :
 
     ![replace_in_1](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/replace_in_1.svg?sanitize=true)
 
-    Fst for non-terminal #NAME :
+    - Fst for non-terminal #NAME :
 
     ![replace_in_2](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/replace_in_2.svg?sanitize=true)
 
-    Fst for non-terminal #FIRSTNAME :
+    - Fst for non-terminal #FIRSTNAME :
 
     ![replace_in_3](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/replace_in_3.svg?sanitize=true)
 
-    Fst for non-terminal #LASTNAME :
+    - Fst for non-terminal #LASTNAME :
 
     ![replace_in_4](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/replace_in_4.svg?sanitize=true)
 
-    Output :
+    - Output :
 
     ![replace_out](https://raw.githubusercontent.com/Garvys/rustfst-images-doc/master/images/replace_out.svg?sanitize=true)
 
     Args:
         root_idx:
         fst_list:
         epsilon_on_replace:
```

## rustfst/algorithms/determinize.py

```diff
@@ -1,12 +1,12 @@
 from __future__ import annotations
 import ctypes
 from typing import Optional
 
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 from enum import Enum
```

## rustfst/algorithms/shortest_path.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
 
 KSHORTESTDELTA = 1e-6
```

## rustfst/algorithms/reverse.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
```

## rustfst/algorithms/rm_epsilon.py

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 import ctypes
-from rustfst.utils import (
+from rustfst.ffi_utils import (
     lib,
     check_ffi_error,
 )
 
 from rustfst.fst.vector_fst import VectorFst
```

## Comparing `rustfst_python-0.9.1a9.dist-info/RECORD` & `rustfst_python-1.0.0.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,32 +1,37 @@
-rustfst_python-0.9.1a9.dist-info/METADATA,sha256=U_bJJjjtbHoLU9G_YW9zIjz0XKn4M6EkKWJlwS3WaAU,1325
-rustfst_python-0.9.1a9.dist-info/RECORD,,
-rustfst_python-0.9.1a9.dist-info/WHEEL,sha256=2gpSqhkp-bwfhwHlkVHBxrX0PwP2aG9_9u5jusTN-wI,237
-rustfst_python-0.9.1a9.dist-info/top_level.txt,sha256=msEMYF8xTVRBintS32B-AHSdp8nOfOmLuYtdHYlP_xE,8
+rustfst_python.libs/libgcc_s-a04fdf82.so.1,sha256=YxqJNaesQMhDswHEQpXsiLnVvMBBbYO6KYMDZFPWKSM,81257
+rustfst_python-1.0.0.dist-info/METADATA,sha256=rVwRWhNTeBfNyg71p6n2qg-fvfNX_zwGqZoV32iuKfQ,12818
+rustfst_python-1.0.0.dist-info/RECORD,,
+rustfst_python-1.0.0.dist-info/top_level.txt,sha256=msEMYF8xTVRBintS32B-AHSdp8nOfOmLuYtdHYlP_xE,8
+rustfst_python-1.0.0.dist-info/WHEEL,sha256=wu3hndhZalUVU2IWYgNxmk7u4GcGZW0HG8iETlT6cV4,113
 rustfst/drawing_config.py,sha256=j-EuBdj23CL5yvLxUTOlfH4yeIjoGpMJyZv12ft_7JI,1666
-rustfst/tr.py,sha256=O74A088L1xZdSIDutifbPJOZtEx05eT3FvEWYcIaLIk,4331
-rustfst/symbol_table.py,sha256=8sqG_-a4lIJ0yhWLwbTW7FEw31EVbiW0Pt4K9wYHgJs,8339
-rustfst/utils.py,sha256=v6zr0rzFzLpZrmkvsankMc75mMWyR_q7hoCoX18Zhks,1181
-rustfst/iterators.py,sha256=japonFT_EW6uSEd0AfCA_mo-Evsb37QGMTtLI-HPt7U,6533
-rustfst/trs.py,sha256=bdroBuXtSbMMf1NyjlnUu9buhbc0zlccC2x6kH59pLI,2268
-rustfst/weight.py,sha256=ndQ5_59JRgcE3nPB3g-PVAgUBSS0_V9L4uPjAmErpU4,801
+rustfst/trs.py,sha256=L0NrQMNu8KolbxBs8Bhfxx30ZGtpad6NaO05E4sWydE,2272
+rustfst/symbol_table.py,sha256=ZY1rP1KbYl2ZYMgNH4csn0Usw_F8LPthhjXwACxDlYc,9741
+rustfst/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+rustfst/weight.py,sha256=hy-txzd_WW7_HYyeOlOL4USpIXRDEoN7KNe3GUFWlpE,805
+rustfst/string_paths_iterator.py,sha256=U5a-ISHk4OL_K-RuGRKM5N6Ww5WIGoqOC6uFp9Afcdw,1892
+rustfst/tr.py,sha256=h0xSNP9xXVOm98OlT3RzTUiSv4VMWZlouWvlpXZHiGE,4306
 rustfst/__init__.py,sha256=siJy84XY2Tge8zbHGNApxzy3l4FtXA97zXc3mewnLTk,285
-rustfst/fst/const_fst.py,sha256=Opr-JpZhMccknJEg0k4GL5SPGSTKsaA-NE44SslApj8,5081
-rustfst/fst/__init__.py,sha256=HJNX85JGnmovQf1EDa9Ehu_6TcaZK75hD7BiOkm0-cQ,8193
-rustfst/fst/vector_fst.py,sha256=Ja1Bve5jgd-XiFy2gqtcowzJezAl_8xWv_WKDQ31js8,11283
-rustfst/algorithms/tr_unique.py,sha256=5QaLBinic6I7gi9EeZD0xPb6c2_donvhwVN7JffG1Nk,350
-rustfst/algorithms/concat.py,sha256=tGTkiLw-1vdEBAgjg7ENVos9wrBwAp8FeFbhsNacgT4,510
-rustfst/algorithms/connect.py,sha256=EZLL5q9lL0r3kSYmWE5H-vDbth88r4KukdkjNovWXjA,579
-rustfst/algorithms/compose.py,sha256=Wo67s2A1wTgSC4kBseuuuPDLq3yewjva09-x3oKUULo,2139
-rustfst/algorithms/optimize.py,sha256=xEiM6581dV3_ipqEpXp6Qt75CmZUZPGIiihZhxRusiU,369
-rustfst/algorithms/isomorphic.py,sha256=6d6vCoXhy2ArR6LzxREdmB9ZbmkWijJ9uxF5dGORRqc,638
-rustfst/algorithms/tr_sort.py,sha256=UDcZYbHa8B6SHUzThmgSa7adHeqmqrgzZ3pBVrpQVi8,482
-rustfst/algorithms/project.py,sha256=m__-x7mN4eObbQt6fYd_DcmgRGcaAxT8v3nNhXJ24tc,1263
-rustfst/algorithms/union.py,sha256=3c2LB-xtGqHHn4PsmJFDmUqvh72kyO30p4YygRcrNCw,489
-rustfst/algorithms/__init__.py,sha256=9FMMWe3BaHIkcjlpNCD0MCP86v1Xk64f_oEuBO_4VEo,2850
-rustfst/algorithms/replace.py,sha256=HKEKDR9frs7W7of4eyxLvd2Fx6GsB0YzSbAGkeL5hPo,2600
-rustfst/algorithms/determinize.py,sha256=6-iz069BTjIfCtAOMvEgR14rWa6eZ2FVxLnMjrJx_4A,2463
-rustfst/algorithms/shortest_path.py,sha256=PogGmx_dcNqzZolDXaW6MDO-OGy-HaBEi4RYQWY0X3g,1715
-rustfst/algorithms/reverse.py,sha256=F0jryjtrryY02SdNEDitRcpl9l5er-58BKUd5Bqwb4w,497
-rustfst/algorithms/rm_epsilon.py,sha256=ETo_b3I33pHWpommuSTcHi8yhFeEw41BOpJfpHbLRdw,518
-rustfst/dylib/dylib.cpython-39-i386-linux-gnu.so,sha256=JFnF1bU9huTq1XKh8OM3BkLDCLarovptlPDr6BmEir8,2502980
-rustfst/dylib/dylib.pypy39-pp73-x86-linux-gnu.so,sha256=JFnF1bU9huTq1XKh8OM3BkLDCLarovptlPDr6BmEir8,2502980
+rustfst/ffi_utils.py,sha256=fXoVVc3B3Ymq7asssXbEePiwuOwXAEid-n3FcVKhuKk,1175
+rustfst/iterators.py,sha256=XRCsgZU5ufiFpyPjmFm4R_iJloP4jzggVJ5DHXARmFg,6577
+rustfst/string_path.py,sha256=GPtL9sxphiRApxcC6-TwwB6LHUFoC6O4Hv_Wn4eFDD4,1549
+rustfst/fst/vector_fst.py,sha256=7m2330areyePTFiQrlyAvy7K4PIiaIltMKp_ou8Ruxk,19399
+rustfst/fst/__init__.py,sha256=3VjSMRdauu08sJInxOR4cVpphA90U8Y0dGAU3pvEMz8,7756
+rustfst/fst/const_fst.py,sha256=6V-EcSiau2Kng1jzMGUzu9mbpFVLN-XgS4ICh-cep3c,4925
+rustfst/dylib/dylib.cpython-310-x86_64-linux-gnu.so,sha256=FXrz0KXrhw83vFHhS7lHIc4yULUn0Ijv2gKVmo8vHT0,1912177
+rustfst/algorithms/concat.py,sha256=nlOJWnVjr0M28gl0h5dURRwD2hC3NgBnSKl7ESUOR0g,999
+rustfst/algorithms/tr_unique.py,sha256=xPnquK_7k4fv2VEQHNeycj0oVTJ4V30F_Igz7GtC8TU,496
+rustfst/algorithms/determinize.py,sha256=RKqSpxtzCFB_XvbtBJDoiTF9_6I21Dfcox7lD-JsFiY,2467
+rustfst/algorithms/rm_epsilon.py,sha256=ePMYAF8dHvcklYbxyagggB-p2P5MeWWnFvu01i3YCTA,522
+rustfst/algorithms/reverse.py,sha256=wP7_Iy70uq2XPNHu1tfkqg4oisBHBdskD9f8gzFtUHk,501
+rustfst/algorithms/randgen.py,sha256=c2PIT5K66JC2flD6P7BlLwnjKcTq_8GaZu5U-sVrVCk,2358
+rustfst/algorithms/union.py,sha256=lBWHpyWcC4XxT5Ig0n2XKCqk0mhR4vnECuIF77_F5mw,1581
+rustfst/algorithms/optimize.py,sha256=J6Ad6RWCJzMVjTUmZgh_pZPAPEiFEZgfSCuKD712QDI,670
+rustfst/algorithms/tr_sort.py,sha256=LV7OYendCabwfVQ-HJay2JmOMB1U0DYoFaAG3XN8fSk,486
+rustfst/algorithms/top_sort.py,sha256=icGsegIx9czYJpBJyEGpuwirwl4V2TLgvmEXpmh_ok0,981
+rustfst/algorithms/compose.py,sha256=4cQGmAfD1Y-DBWEzCCfIpFSXPurYbdu9husGP3HfLSs,3538
+rustfst/algorithms/project.py,sha256=ADjB1voCrBUMYi1-_JPMUsuPzKZH_zk3cZExV1-sAjc,1267
+rustfst/algorithms/shortest_path.py,sha256=FIPP68HdDX8ioTVAf31kpGpNL82HUAzmoJSZxauuTjE,1719
+rustfst/algorithms/__init__.py,sha256=2yhf-IPu7v31-JhCYAA0WMNVz8F9qKIhmfqtN_NOUW0,2854
+rustfst/algorithms/isomorphic.py,sha256=8JydakrcAUKGl9TeqlXjZpFhJJ6CJDpPC5a6eNfRDjs,642
+rustfst/algorithms/replace.py,sha256=-ZpR_ZCPRRh8NZ17_0Glg84D4UrbrgH5jArKTvdh4jM,2629
+rustfst/algorithms/connect.py,sha256=6_-qeLzfMezf3VmnagmQtIH5s6xpvP3RgBOMS8lXnBc,753
```

## Comparing `rustfst/utils.py` & `rustfst/ffi_utils.py`

 * *Files 16% similar despite different names*

```diff
@@ -42,8 +42,8 @@
 def check_ffi_error(exit_code, error_context_msg):
     if exit_code != 0:
         with string_pointer(c_char_p()) as ptr:
             if lib.rustfst_ffi_get_last_error(byref(ptr)) == 0:
                 ffi_error_message = string_at(ptr).decode("utf8")
             else:
                 ffi_error_message = "see stderr"
-        raise ValueError("%s: %s" % (error_context_msg, ffi_error_message))
+        raise ValueError(f"{error_context_msg}: {ffi_error_message}")
```

